(this["webpackJsonpnote-taking"]=this["webpackJsonpnote-taking"]||[]).push([[0],{242:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){},247:function(e,t,n){"use strict";n.r(t);var c,r,o,a,l=n(2),s=n(80),i=n.n(s),u=n(12),b=n(26),d=n(40),j=n.n(d),O=n(66),f=n(132),h=n.n(f),p=n(137),y=n(21),g=n(41),m=Object(u.gql)(c||(c=Object(g.a)(["mutation createNote($body: String!) {\n    createNote(body: $body) {\n        id,\n        createdAt,\n        updatedAt,\n        body\n    }\n}"]))),N=Object(u.gql)(r||(r=Object(g.a)(["mutation updateNote($id: ID! $body: String!) {\n    updateNote(id: $id body: $body) {\n        id,\n        createdAt,\n        updatedAt,\n        body\n    }\n}"]))),v=Object(u.gql)(o||(o=Object(g.a)(["mutation deleteNote($id: ID!) {\n    deleteNote(id: $id) {\n        id,\n        createdAt,\n        updatedAt,\n        body\n    }\n}"]))),x=(n(242),n(4)),S=function(e){var t=e.error,n=e.loading,c=e.networkStatus,r=e.refetch,o=e.notes,a=e.selectedNote,l=e.setSelectedNote,s=Object(u.useMutation)(v),i=Object(b.a)(s,2),d=i[0],f=i[1],g=f.loading,m=f.error,N=function(){var e=Object(O.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d({variables:{id:t}});case 2:r();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{className:"notes_container_wrapper",children:[Object(x.jsx)("h2",{className:"ml-1",children:"Notes"}),n||g||c===u.NetworkStatus.refetch?Array.from(Array(o.length)).map((function(e,t){return Object(x.jsx)(p.a,{className:"box"},t)})):t?Object(x.jsx)("p",{children:"Error! ".concat(t)}):o.map((function(e,t){var n=!!a&&a.id===e.id,c=y.EditorState.createWithContent(Object(y.convertFromRaw)(JSON.parse(e.body)));return Object(x.jsxs)("section",{className:h()("box",n?"active-post":""),children:[Object(x.jsx)("div",{onClick:function(){return l(e)},children:Object(x.jsx)(y.Editor,{editorState:c,readOnly:!0})}),Object(x.jsx)("button",{className:"btn small",onClick:function(){return N(e.id)},children:"Delete Note"}),m&&Object(x.jsx)("p",{className:"error",children:"Error occurred when deleting note"})]},t)}))]})},k=n(51),C=(n(244),function(e){var t=e.style,n=e.active,c=e.label,r=e.onToggle,o=n?"RichEditor-activeButton":"RichEditor-styleButton";return Object(x.jsx)("span",{className:o,onMouseDown:function(e){return function(e){e.preventDefault(),r(t)}(e)},children:c})}),w=[{label:"H1",style:"header-one"},{label:"H2",style:"header-two"},{label:"H3",style:"header-three"},{label:"H4",style:"header-four"},{label:"H5",style:"header-five"},{label:"H6",style:"header-six"},{label:"Blockquote",style:"blockquote"},{label:"UL",style:"unordered-list-item"},{label:"OL",style:"ordered-list-item"},{label:"Code Block",style:"code-block"}],E=[{label:"Bold",style:"BOLD"},{label:"Italic",style:"ITALIC"},{label:"Underline",style:"UNDERLINE"},{label:"Monospace",style:"CODE"}],T={CODE:{backgroundColor:"rgba(0, 0, 0, 0.05)",fontFamily:'"Inconsolata", "Menlo", "Consolas", monospace',fontSize:16,padding:3}},A=function(e){var t=e.editorState,n=e.onToggle,c=t.getSelection(),r=t.getCurrentContent().getBlockForKey(c.getStartKey()).getType();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"bold ml-1",children:"Block Style Controls"}),Object(x.jsx)("div",{className:"RichEditor-controls",children:w.map((function(e){return Object(x.jsx)(C,{active:e.style===r,label:e.label,onToggle:n,style:e.style},e.label)}))})]})},I=function(e){var t=e.editorState,n=e.onToggle,c=t.getCurrentInlineStyle();return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("p",{className:"bold ml-1",children:"Inline Style Controls"}),Object(x.jsx)("div",{className:"RichEditor-controls",children:E.map((function(e){return Object(x.jsx)(C,{active:c.has(e.style),label:e.label,onToggle:n,style:e.style},e.label)}))})]})},R=(n(245),function(e){var t=e.refetch,n=e.selectedNote,c=e.setSelectedNote,r=Object(l.useRef)(null),o=Object(l.useState)(!1),a=Object(b.a)(o,2),s=a[0],i=a[1],d=Object(l.useState)(""),f=Object(b.a)(d,2),h=f[0],p=f[1],g=Object(l.useState)(""),v=Object(b.a)(g,2),S=v[0],C=v[1],w=Object(l.useState)(y.EditorState.createEmpty()),E=Object(b.a)(w,2),R=E[0],B=E[1],F=Object(u.useMutation)(m),D=Object(b.a)(F,1)[0],q=Object(u.useMutation)(N),M=Object(b.a)(q,1)[0];Object(l.useEffect)((function(){$()}),[]),Object(l.useEffect)((function(){n&&L(y.EditorState.createWithContent(Object(y.convertFromRaw)(JSON.parse(n.body))))}),[n]);var $=function(){r.current.focus()},L=function(e){return B(e)},U=function(){return Object(y.convertToRaw)(R.getCurrentContent()).blocks.some((function(e){return e.text.trim()}))},H=function(e){var t={variables:{body:JSON.stringify(e)}};return n?M(Object(k.a)(Object(k.a)({},t),{},{variables:Object(k.a)(Object(k.a)({},t.variables),{},{id:n.id})})):D(t)},J=function(){var e=Object(O.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p(""),C(""),i(!0),n=Object(y.convertToRaw)(R.getCurrentContent()),!U()){e.next=19;break}return e.prev=5,e.next=8,H(n);case 8:p("Successfully saved note!"),t(),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(5),console.log(e.t0,"e"),C("Error saving note :(");case 16:return e.prev=16,i(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[5,12,16,19]])})));return function(){return e.apply(this,arguments)}}();return Object(x.jsxs)("div",{children:[Object(x.jsxs)("section",{className:"flex space-between",children:[Object(x.jsxs)("h2",{className:"ml-1",children:[n?"Update":"Create"," Note"]}),n&&Object(x.jsx)("button",{className:"btn primary small",onClick:function(){return c(null)},children:"New Note +"})]}),Object(x.jsx)(A,{editorState:R,onToggle:function(e){L(y.RichUtils.toggleBlockType(R,e))}}),Object(x.jsx)(I,{editorState:R,onToggle:function(e){L(y.RichUtils.toggleInlineStyle(R,e))}}),Object(x.jsx)(y.Editor,{ref:r,editorState:R,onChange:L,blockStyleFn:function(e){switch(e.getType()){case"blockquote":return"RichEditor-blockquote";default:return null}},customStyleMap:T}),Object(x.jsx)("div",{className:"btn-wrapper",children:Object(x.jsx)("button",{disabled:s||!U(),className:"btn primary",onClick:function(){return J()},children:s?"Saving...":n?"Update":"Save"})}),h&&Object(x.jsx)("p",{className:"success right",children:h}),S&&Object(x.jsx)("p",{className:"error right",children:S})]})}),B=Object(u.gql)(a||(a=Object(g.a)(["\n    query {\n        allNotes {\n            id,\n            createdAt,\n            updatedAt,\n            body\n        }\n    }\n"]))),F=(n(246),function(){var e=Object(l.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1],r=Object(l.useState)(null),o=Object(b.a)(r,2),a=o[0],s=o[1],i=Object(u.useQuery)(B,{notifyOnNetworkStatusChange:!0}),d=i.error,j=i.loading,O=i.data,f=i.refetch,h=i.networkStatus;return Object(l.useEffect)((function(){O&&O.allNotes&&c(O.allNotes)}),[O]),Object(x.jsxs)("div",{className:"app-wrapper box",children:[Object(x.jsx)(S,{error:d,loading:j,networkStatus:h,refetch:f,notes:n,selectedNote:a,setSelectedNote:s}),Object(x.jsx)(R,{refetch:f,selectedNote:a,setSelectedNote:s})]})}),D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,248)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),o(e),a(e)}))},q=new u.ApolloClient({uri:"http://localhost:4000/",cache:new u.InMemoryCache});i.a.render(Object(x.jsx)(u.ApolloProvider,{client:q,children:Object(x.jsx)(F,{})}),document.getElementById("root")),D()}},[[247,1,2]]]);
//# sourceMappingURL=main.6912d377.chunk.js.map